---

- name: common configuration for all hosts
  hosts: all
  remote_user: root
  vars:
    deepops_dir: /opt/deepops

  tasks:
    - name: build slurm on all nodes
      include_role:
        name: slurm
        tasks_from: main

  roles:
    - { name: hosts, tags: hosts }

- name: execute nodes
  hosts: exec
  remote_user: root


- name: controller nodes
  hosts: controller
  remote_user: root
